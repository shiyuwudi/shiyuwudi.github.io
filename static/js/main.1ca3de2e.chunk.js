(this["webpackJsonpworking-hours"]=this["webpackJsonpworking-hours"]||[]).push([[0],{211:function(e,t,a){e.exports=a(430)},216:function(e,t,a){},217:function(e,t,a){},430:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),l=a.n(o),c=(a(216),a(143)),s=a(78),i=a(83),m=a(179),u=a(180),d=a(209),f=a(181),p=a(210),v=(a(217),a(218),a(20)),h=a.n(v),g=a(435),E=a(439),y=a(436),D=a(437),k=a(432),w=a(438),b=a(434),C=a(433),O=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},S=function(e,t){var a=window.localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(n){console.log("error occurred while parsing: ",a)}return t},N=a(182),x=g.a.RangePicker,M=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).formRef=r.a.createRef(),a.dateFormat="YYYY-MM-DD",a.timeFormat="HH:mm",a.onSelect=function(e){var t=e.format(a.dateFormat);a.setState({selectedDate:t},(function(){var e=a.formRef.current;if(e){var n=a.state.dateMap,r=[];if(n.hasOwnProperty(t)){var o=n[t],l=o.type,c=o.content;"success"===l&&c&&2===c.length&&(r=c)}e.setFieldsValue({timeRange:r.map((function(e){return h()(e)}))})}}))},a.onTotalChange=function(e){a.setState({total:e}),O("total",e)},a.onTotalDChange=function(e){a.setState({totalD:e}),O("totalD",e)},a.getListData=function(e){var t=a.state.dateMap,n=e.format(a.dateFormat);return t.hasOwnProperty(n)?[t[n]]:[]},a.dateCellRender=function(e){var t=a.getListData(e);return r.a.createElement("ul",{className:"events"},t.map((function(e){var t;return t=Array.isArray(e.content)?e.content.map((function(e){return h()(e).format(a.timeFormat)})).join(" ~ "):e.content,r.a.createElement("li",{key:e.content},r.a.createElement(E.a,{status:e.type,text:t}))})))},a.onFormCancel=function(){a.setState({selectedDate:null})},a.persistState=function(){var e=a.state.dateMap;O("dateMap",e)},a.onFormOk=function(){a.formRef.current.validateFields().then((function(e){var t=e.timeRange;if(!t||!Array.isArray(t)||2!==t.length||t.some((function(e){return!e||!h.a.isMoment(e)})))return y.a.error("Time range is in wrong format");a.setState({saving:!0}),a.setState((function(e){return Object(i.a)({},e,{dateMap:Object(i.a)({},e.dateMap,Object(s.a)({},e.selectedDate,{type:"success",content:t}))})}),(function(){a.persistState(),a.setState({saving:!1,selectedDate:null}),y.a.success("Working Hours Saved!")}))})).catch((function(e){console.log("form error",e)}))},a.clearCurrentDate=function(){a.setState({saving:!0}),a.setState((function(e){var t=e.dateMap,a={},n=e.selectedDate;for(var r in t)t.hasOwnProperty(r)&&n!==r&&(a[r]=t[r]);return Object(i.a)({},e,{dateMap:a})}),(function(){a.persistState(),a.setState({saving:!1,selectedDate:null}),y.a.success("Working Hours Cleared!")}))},a.onImport=function(){document.getElementById("image").click()},a.importText=function(e){var t=e.split("\n").filter((function(e){return!!e})).map((function(e){var t=e.split(" "),n=Object(c.a)(t,2),r=n[0],o=n[1];return{key:h()(r,"MM\u6708DD\u65e5").format(a.dateFormat),value:{type:"success",content:o.split("-").map((function(e){return h()(e,"HHmm")}))}}})).reduce((function(e,t){return Object(i.a)({},e,Object(s.a)({},t.key,t.value))}),{});a.setState({dateMap:t}),O("dateMap",t)},a.onUploadChange=function(e){var t=e.target.files;if(t&&t.length>0){var n=t[0],r=new FileReader;r.addEventListener("loadend",(function(e){a.importText(r.result)})),r.readAsText(n)}},a.onExport=function(){var e=a.state.dateMap,t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=r.content;if("success"===r.type&&o&&Array.isArray(o)&&2===o.length)t+="".concat(h()(n).format("MM\u6708DD\u65e5")," ").concat(o.map((function(e){return h()(e).format("HHmm")})).join("-"),"\n")}a.saveTxt(t)},a.saveTxt=function(e){var t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(N.saveAs)(t,"export.txt")};var n=S("dateMap",{}),o=+S("total",150),l=+S("totalD",22);return a.state={total:o,totalD:l,selectedDate:null,selectedRange:[],dateMap:n,saving:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.total,a=e.selectedDate,n=e.saving,o=e.dateMap,l=e.totalD,s=h()().month(),i=0,m=0;for(var u in o)if(o.hasOwnProperty(u)&&h()(u).month()===s){var d=o[u],f=d.type,p=d.content;if("success"===f){var v=Object(c.a)(p,2),g=v[0],E=v[1];i+=h()(E).diff(h()(g),"seconds")-3600,m+=1}}var y=(i/3600).toFixed(2),O="".concat(y,"h"),S=l-m,N=t-+y,M=N.toFixed(2),F=(N/S).toFixed(2),R=[{desc:"Current Total",result:O},{desc:"Remaining",result:"".concat(S,"days / ").concat(M,"h")},{desc:"Daily Estimated Hours",result:"".concat(F,"h (1h Lunch Break excluded)")}],j=!!a,T=r.a.createElement("div",null,"Fill in working hours for "+(a||""),r.a.createElement("a",{className:"clear-time",onClick:this.clearCurrentDate},"Delete"));return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"title"},"Working Hour Calculator"),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"title1"},"Step1. Fill in information below"),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"total-label"},"Target Total Working Hours"),r.a.createElement("div",null,r.a.createElement(D.a,{value:t,onChange:this.onTotalChange})),r.a.createElement("div",{className:"total-suffix"},"(Default: 150 Hours)")),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"total-label"},"Total Working Days In Month"),r.a.createElement("div",null,r.a.createElement(D.a,{value:l,onChange:this.onTotalDChange})),r.a.createElement("div",{className:"total-suffix"},"(Default: 22 Days)"))),r.a.createElement("div",{className:"result"},r.a.createElement("div",{className:"title1"},"Step3. Results come below"),r.a.createElement("div",{className:"body"},r.a.createElement(k.a,{size:"small",columns:[{title:"Description",dataIndex:"desc",key:"desc"},{title:"Result (Calculated)",dataIndex:"result",key:"result"}],dataSource:R,pagination:!1,style:{width:"100%"},rowKey:"desc"}))),r.a.createElement("div",{className:"cal"},r.a.createElement("div",{className:"title1"},r.a.createElement("div",{className:"cal-header"},r.a.createElement("div",null,"Step2. Click on date cells to take note on daily working hours "),r.a.createElement("div",null,r.a.createElement("a",{className:"cal-import",onClick:this.onImport},"Import"),r.a.createElement("input",{type:"file",id:"image",name:"image",style:{display:"none"},onChange:this.onUploadChange,accept:"txt"}),r.a.createElement("a",{onClick:this.onExport},"Export")))),r.a.createElement("div",{className:""},r.a.createElement(w.a,{onSelect:this.onSelect,dateCellRender:this.dateCellRender}))),r.a.createElement(b.a,{forceRender:!0,visible:j,title:T,onCancel:this.onFormCancel,width:700,centered:!0,onOk:this.onFormOk,confirmLoading:n},r.a.createElement("div",{className:"form-container"},r.a.createElement(C.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",ref:this.formRef}),r.a.createElement(C.a.Item,{name:"timeRange",label:"Check-in & Off Time",rules:[{required:!0,message:"Please select time range!"}]},r.a.createElement(x,null))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[211,1,2]]]);
//# sourceMappingURL=main.1ca3de2e.chunk.js.map