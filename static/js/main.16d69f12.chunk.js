(this["webpackJsonpworking-hours"]=this["webpackJsonpworking-hours"]||[]).push([[0],{301:function(e,t,a){e.exports=a(630)},306:function(e,t,a){},307:function(e,t,a){},527:function(e,t){},529:function(e,t){},562:function(e,t){},563:function(e,t){},630:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),o=a.n(l),c=(a(306),a(110)),s=a(106),i=a(76),m=a(132),u=a(133),d=a(148),f=a(134),v=a(151),p=(a(307),a(308),a(32)),h=a.n(p),g=a(636),E=a(640),y=a(638),b=a(637),k=a(631),w=a(639),O=a(634),C=a(632),S=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},D=function(e,t){var a=window.localStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(n){console.log("error occurred while parsing: ",a)}return t},N=a(274),j=g.a.RangePicker,x=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).formRef=r.a.createRef(),a.dateFormat="YYYY-MM-DD",a.timeFormat="HH:mm",a.onSelect=function(e){var t=e.format(a.dateFormat);a.setState({selectedDate:t},(function(){var e=a.formRef.current;if(e){var n=a.state.dateMap,r=[];if(n.hasOwnProperty(t)){var l=n[t],o=l.type,c=l.content;"success"===o&&c&&2===c.length&&(r=c)}e.setFieldsValue({timeRange:r.map((function(e){return h()(e)}))})}}))},a.onTotalChange=function(e){a.setState({total:e}),S("total",e)},a.onTotalDChange=function(e){a.setState({totalD:e}),S("totalD",e)},a.getListData=function(e){var t=a.state.dateMap,n=e.format(a.dateFormat);return t.hasOwnProperty(n)?[t[n]]:[]},a.dateCellRender=function(e){var t=a.getListData(e);return r.a.createElement("ul",{className:"events"},t.map((function(e){var t;return t=Array.isArray(e.content)?e.content.map((function(e){return h()(e).format(a.timeFormat)})).join(" ~ "):e.content,r.a.createElement("li",{key:e.content},r.a.createElement(E.a,{status:e.type,text:t}))})))},a.onFormCancel=function(){a.setState({selectedDate:null})},a.persistState=function(){var e=a.state.dateMap;S("dateMap",e)},a.onFormOk=function(){a.formRef.current.validateFields().then((function(e){var t=e.timeRange;if(!t||!Array.isArray(t)||2!==t.length||t.some((function(e){return!e||!h.a.isMoment(e)})))return y.a.error("Time range is in wrong format");a.setState({saving:!0}),a.setState((function(e){return Object(i.a)({},e,{dateMap:Object(i.a)({},e.dateMap,Object(s.a)({},e.selectedDate,{type:"success",content:t}))})}),(function(){a.persistState(),a.setState({saving:!1,selectedDate:null}),y.a.success("Working Hours Saved!")}))})).catch((function(e){console.log("form error",e)}))},a.clearCurrentDate=function(){a.setState({saving:!0}),a.setState((function(e){var t=e.dateMap,a={},n=e.selectedDate;for(var r in t)t.hasOwnProperty(r)&&n!==r&&(a[r]=t[r]);return Object(i.a)({},e,{dateMap:a})}),(function(){a.persistState(),a.setState({saving:!1,selectedDate:null}),y.a.success("Working Hours Cleared!")}))},a.onImport=function(){document.getElementById("image").click()},a.importText=function(e){var t=e.split("\n").filter((function(e){return!!e})).map((function(e){var t=e.split(" "),n=Object(c.a)(t,2),r=n[0],l=n[1];return{key:h()(r,"MM\u6708DD\u65e5").format(a.dateFormat),value:{type:"success",content:l.split("-").map((function(e){return h()(e,"HHmm")}))}}})).reduce((function(e,t){return Object(i.a)({},e,Object(s.a)({},t.key,t.value))}),{});a.setState({dateMap:t}),S("dateMap",t)},a.onUploadChange=function(e){var t=e.target.files;if(t&&t.length>0){var n=t[0],r=new FileReader;r.addEventListener("loadend",(function(e){a.importText(r.result)})),r.readAsText(n)}},a.onExport=function(){var e=a.state.dateMap,t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],l=r.content;if("success"===r.type&&l&&Array.isArray(l)&&2===l.length)t+="".concat(h()(n).format("MM\u6708DD\u65e5")," ").concat(l.map((function(e){return h()(e).format("HHmm")})).join("-"),"\n")}a.saveTxt(t)},a.saveTxt=function(e){var t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(N.saveAs)(t,"export.txt")};var n=D("dateMap",{}),l=+D("total",150),o=+D("totalD",22);return a.state={total:l,totalD:o,selectedDate:null,selectedRange:[],dateMap:n,saving:!1},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.total,a=e.selectedDate,n=e.saving,l=e.dateMap,o=e.totalD,s=h()().month(),i=0,m=0;for(var u in l)if(l.hasOwnProperty(u)&&h()(u).month()===s){var d=l[u],f=d.type,v=d.content;if("success"===f){var p=Object(c.a)(v,2),g=p[0],E=p[1];i+=h()(E).diff(h()(g),"seconds")-3600,m+=1}}var y=(i/3600).toFixed(2),S="".concat(y,"h"),D=o-m,N=t-+y,x=N.toFixed(2),F=(N/D).toFixed(2),M=[{desc:"Current Total",result:S},{desc:"Remaining",result:"".concat(D,"days / ").concat(x,"h")},{desc:"Daily Estimated Hours",result:"".concat(F,"h (1h Lunch Break excluded)")}],R=!!a,T=r.a.createElement("div",null,"Fill in working hours for "+(a||""),r.a.createElement("a",{className:"clear-time",onClick:this.clearCurrentDate},"Delete"));return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"title"},"Working Hour Calculator"),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"title1"},"Step1. Fill in information below"),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"total-label"},"Target Total Working Hours"),r.a.createElement("div",null,r.a.createElement(b.a,{value:t,onChange:this.onTotalChange})),r.a.createElement("div",{className:"total-suffix"},"(Default: 150 Hours)")),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"total-label"},"Total Working Days In Month"),r.a.createElement("div",null,r.a.createElement(b.a,{value:o,onChange:this.onTotalDChange})),r.a.createElement("div",{className:"total-suffix"},"(Default: 22 Days)"))),r.a.createElement("div",{className:"result"},r.a.createElement("div",{className:"title1"},"Step3. Results come below"),r.a.createElement("div",{className:"body"},r.a.createElement(k.a,{size:"small",columns:[{title:"Description",dataIndex:"desc",key:"desc"},{title:"Result (Calculated)",dataIndex:"result",key:"result"}],dataSource:M,pagination:!1,style:{width:"100%"},rowKey:"desc"}))),r.a.createElement("div",{className:"cal"},r.a.createElement("div",{className:"title1"},r.a.createElement("div",{className:"cal-header"},r.a.createElement("div",null,"Step2. Click on date cells to take note on daily working hours "),r.a.createElement("div",null,r.a.createElement("a",{className:"cal-import",onClick:this.onImport},"Import"),r.a.createElement("input",{type:"file",id:"image",name:"image",style:{display:"none"},onChange:this.onUploadChange,accept:"txt"}),r.a.createElement("a",{onClick:this.onExport},"Export")))),r.a.createElement("div",{className:""},r.a.createElement(w.a,{onSelect:this.onSelect,dateCellRender:this.dateCellRender}))),r.a.createElement(O.a,{forceRender:!0,visible:R,title:T,onCancel:this.onFormCancel,width:700,centered:!0,onOk:this.onFormOk,confirmLoading:n},r.a.createElement("div",{className:"form-container"},r.a.createElement(C.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",ref:this.formRef}),r.a.createElement(C.a.Item,{name:"timeRange",label:"Check-in & Off Time",rules:[{required:!0,message:"Please select time range!"}]},r.a.createElement(j,null))))))}}]),t}(r.a.Component),F=a(635),M=a(27),R=F.a.TextArea,T={labelCol:{span:8},wrapperCol:{span:16}},I={},A=function(e){var t=e.onOk,a=C.a.useForm(),n=Object(c.a)(a,1)[0];return r.a.createElement(C.a,Object.assign({},T,{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},form:n}),r.a.createElement(C.a.Item,{label:"\u6697\u53f7",name:"secret",rules:[{required:!0,message:"\u7f3a\u6697\u53f7\uff0c\u77f3\u5b87\u8981\uff01"}]},r.a.createElement(F.a.Password,null)),r.a.createElement(C.a.Item,{label:"\u5185\u5bb9",name:"content",rules:[{required:!0,message:"\u8f93\u5165\u8981\u52a0\u5bc6\u7684\u5185\u5bb9\uff01"}]},r.a.createElement(R,{autoSize:{minRows:3}})),r.a.createElement(C.a.Item,I,[{title:"-> \u4e16\u754c\u8bed",className:"left",action:"world"},{title:"\u4eba\u8bdd <-",className:"right",action:"human"}].map((function(e){return r.a.createElement(M.a,{className:"world-lang-button "+e.className,type:"ghost",htmlType:"button",onClick:function(){return a=e.action,void n.validateFields().then((function(e){t(Object(i.a)({action:a},e))})).catch((function(e){}));var a},key:e.action},e.title)}))))},H=a(152),P=a.n(H),W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).onOk=function(e){var t=e.action,n=e.secret,r=e.content;if("world"===t){var l=P.a.AES.encrypt(r,n).toString();a.setState({result:l})}else{var o=P.a.AES.decrypt(r,n).toString(P.a.enc.Utf8);a.setState({result:o})}},a.state={result:""},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"world-lang-wrapper"},r.a.createElement("div",{className:"content-area"},r.a.createElement(A,{onOk:this.onOk})),r.a.createElement("div",{className:"result"},r.a.createElement("div",{className:"result-label"},"\u7ed3\u679c\uff1a"),r.a.createElement("div",{className:"result-text"},this.state.result)))}}]),t}(n.Component),B=a(633),L=B.a.TabPane;function J(e){console.log(e)}var Y=function(){return r.a.createElement("div",null,r.a.createElement(B.a,{onChange:J,type:"card"},r.a.createElement(L,{tab:"\u4e16\u754c\u8bed\u7ffb\u8bd1\u673a v0.1",key:"2"},r.a.createElement(W,null)),r.a.createElement(L,{tab:"\u5de5\u4f5c\u65f6\u95f4\u8ba1\u7b97\u5668 v0.1",key:"1"},r.a.createElement(x,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[301,1,2]]]);
//# sourceMappingURL=main.16d69f12.chunk.js.map